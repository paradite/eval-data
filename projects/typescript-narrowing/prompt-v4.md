Fix the typescript error by using proper type narrowing.

Do not use type assertions. Do not use type guards.